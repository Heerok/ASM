
<div data-ng-controller="ScrapingDataController" class="panel panel-default">
    <div class="panel-body">

        <h2 class="text-muted"><b>Scraping Data</b></h2>                                                                   <!-- Header-->
        <div class="row">
            <div class="input-lg col-lg-4">
                <span class="input-icon">
                    <input type="text" class="form-control" ng-model="searchText"  placeholder="Search" data-ng-change="setCurrentPage()"/>
                    <i class="glyphicon glyphicon-search blue"></i>
                </span>
            </div>
            <div class="col-lg-5"></div>
            <div class=" btn-group col-lg-3 pull-right" style="margin-top:12px;">
                <button data-ng-click="openUploadModal()" class="btn btn-default"><i class="glyphicon glyphicon-upload"></i>Upload</button>
                <button id="add" class="btn btn-default " data-ng-click="edit()" ><i class="glyphicon glyphicon-plus"></i>Add</button>
                <select name="pageSize" ng-model="pageSize" id="pageSize" style=" height : 32px; ">
                    <option value=5>5</option>
                    <option value=10>10</option>
                    <option value=15>15</option>
                    <option value=20>20</option>
                    <option value=30>30</option>
                    <option value={{TotalRecordCount}}>All</option>
                </select>
            </div>
        </div>

        <div class="table-scrollable">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>Product Code</th>
                    <th>Vendor</th>
                    <th>Url</th>
                    <th>Last Status</th>
                    <th>Edit</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr class="paginationclass" data-ng-repeat="e in list |filter:searchText | pagination: curPage * pageSize | limitTo : pageSize" >
                    <td>{{e.code}}</td>
                    <td>{{e.vendor}}</td>
                    <td>{{e.url}}</td>
                    <td>{{e.status}}</td>
                    <td><a href="" data-ng-click="edit(e)" tooltip-placement="top" tooltip="Edit Event"><i class="glyphicon glyphicon-edit"></i></a></td>
                    <td><a href="" data-ng-click="delete(e.id)" tooltip-placement="top" tooltip="Delete Event"><i class="glyphicon glyphicon-trash"></i></a></td>
                </tr>
                </tbody>
            </table>
        </div>
        </br>

        <div class="pagination pagination-centered  pull-right" ng-show="list.length">                            <!-- Pagination -->
            <ul class="pagination-controle pagination">
                <li><button type="button" class="btn btn-default" ng-disabled="curPage == 0" ng-click="curPage=curPage-1"> &lt; PREV </button></li>
                <li><span>Page {{curPage + 1}} of {{ numberOfPages() }}</span></li>
                <li><button type="button" class="btn btn-default"   ng-disabled="curPage >= TotalRecordCount/pageSize - 1" ng-click="curPage = curPage+1">NEXT &gt;</button></li>
                <li>
                    <input type="number" min="1" data-ng-model="goToPage" style=" width:60px; height : 30px; "  data-ng-change="checkPage(goToPage)" >
                    <button type="button" class="btn btn-default"  ng-click="jumpToPage()" ng-disabled="disableJumpButton">Go To Page</button>
                </li>
            </ul>
        </div>                                                                                                                                     <!-- /Pagination -->

        <div align="right" class="row ">
            </br></br><span id="shwErrMsg"><b></b></span>
        </div>

        <script type="text/ng-template" id="editEventModal">
            <div class="modal-header bg-blue">
                <a href="" class="btn btn-circle btn-xs blue pull-right" data-toggle="tooltip" title="Close !" data-ng-click="$close()"><i class="glyphicon glyphicon-remove"></i></a>
                <h4 class="modal-title white"><b>{{update}} Event</b></h4>
            </div>
            <div class="modal-body">
                <div class="col-md-12">
                    <label class="col-md-3 control-label no-padding-right no-padding-left"><b>Event Name</b></label>
                    <div class="col-md-6">
                        <input type="text" class="form-control" data-ng-model="event.eventName">
                    </div>
                </div>
                <div class="row"><br><br><br></div>
                <div class="col-md-12">
                    <label class="col-md-3 control-label no-padding-right no-padding-left"><b>Event Details</b></label>
                    <div class="col-md-9">
                        <textarea rows="10" class="form-control" data-ng-model="event.eventDetails"></textarea>
                    </div>
                </div>
                <div class="row"><br><br><br></div>
                <div class="col-sm-12">
                    <label class="col-sm-3 control-label no-padding-right no-padding-left"><b>Active</b></label>
                    <div class="col-lg-3">
                        <input type="checkbox" data-ng-model="event.active">
                    </div>
                </div>
                <div class="row"><br><br><br></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-blue" data-ng-click="save(event)"><i class="fa fa-save"></i>Save</button>
            </div>
        </script>
        <script type="text/ng-template" id="uploadDataModal">
            <div class="widget">
                <div class="widget-header bordered-bottom bordered-blue">
                <span class="widget-caption">
                    <b>Import Data</b>
                </span>
                </div>
                <div class="widget-body">
                    <div>
                        <table>
                            <tr>
                                <td class="col-xs-3 col-md-3">
                                    <div class="widget-body bordered-left bordered-blue">
                                        <label>
                                            <input class="checkbox-slider slider-icon colored-blue" type="checkbox"
                                                   ng-model="modal.dryRun" ng-selected="true">
                                            <span class="text">&nbsp;&nbsp;Dry Run</span>
                                        </label>
                                        <input class="btn btn-primary" type="file" file-model="modal.myFile"/><br>
                                        <button class="btn btn-warning" ng-click="uploadWork()" ng-if="modal.enable==true">Upload
                                        </button>
                                    </div>
                                </td>
                                <td><center><label ng-if="modal.enable!=true"><img src="/images/loading_animation.gif"></label></center>
                                    <div class="widget-body bordered-left bordered-blue" ng-model="modal.result"
                                         ng-if="(modal.result.BatchTypeId!=null || modal.result.Comments!=null)">
                                        <table class="table table-striped">
                                            <thead>
                                            <tr>
                                                <th>Id</th>
                                                <th>DryRun</th>
                                                <th>Date</th>
                                                <th>Status</th>
                                                <th>Comments</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr>
                                                <td>{{modal.result.Id}}</td>
                                                <td>{{modal.result.DryRun}}</td>
                                                <td>{{modal.result.BatchDate}}</td>
                                                <td>{{modal.result.Status}}</td>
                                                <td>{{modal.result.Comments}}</td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <hr>
                    <div class="widget-body bordered-left bordered-blue" ng-model="modal.result"
                         ng-if="modal.BatchResults!=null && modal.BatchResults.length>0">
                        <div id="exportable">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th>Vendor</th>
                                    <th>Bids</th>
                                    <th>Status</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="BatchResult in modal.BatchResults">
                                    <td>{{BatchResult.key}}</td>
                                    <td>{{BatchResult.value}}</td>
                                    <td>{{BatchResult.status}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </script>

    </div>
</div>
